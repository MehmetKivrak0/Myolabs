<!DOCTYPE html>
<html lang="tr">

<!-- Mirrored from xrlab.cbu.edu.tr/lab/pages/lab9.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 23 Aug 2025 09:17:11 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GeniÅŸletilmiÅŸ GerÃ§eklik LaboratuvarÄ± DetaylarÄ± - MCBÃœ">
    <title>GeniÅŸletilmiÅŸ GerÃ§eklik LaboratuvarÄ± - MCBÃœ</title>

    <link rel="stylesheet" href="../styles/variables.css">
    <link rel="stylesheet" href="../styles/base.css">
    <link rel="stylesheet" href="../styles/components/navbar.html">
    <link rel="stylesheet" href="../styles/components/cards.css">
    <link rel="stylesheet" href="../styles/components/buttons.css">
    <link rel="stylesheet" href="../styles/components/footer.css">
    <link rel="stylesheet" href="../styles/components/lab-details.css">
    <link rel="stylesheet" href="../styles/utilities.css">
    <link rel="stylesheet" href="../styles/responsive.css">
    <link rel="stylesheet" href="../styles/components/hero.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Hero Section -->
    <header class="hero">
        <div class="hero-content">
            <img src="../images/myo.png" alt="MCBÃœ Logo" class="myo-logo">   
        </div>
        
        <!-- Back to Catalog Button -->
        <div class="back-button-container">
            <a href="../../myokatalog/index.html" class="back-to-catalog-btn">
                <i class="fas fa-arrow-left"></i>
                <span>KataloÄŸa Geri DÃ¶n</span>
            </a>
        </div>
    </header>
    
        <main class="container">
            <div class="lab-details">
                <!-- Loading state -->
                <div id="lab-loading" class="lab-loading">
                    <div class="spinner"></div>
                    <p>Laboratuvar bilgileri yÃ¼kleniyor...</p>
                </div>
                
                <!-- Lab content (will be populated dynamically) -->
                <div id="lab-content" style="display: none;">
                    <img id="lab-main-image" src="" alt="Laboratuvar Ana Resmi" class="lab-main-image">
                    <div class="lab-info">
                        <h1 id="lab-title">Laboratuvar BaÅŸlÄ±ÄŸÄ±</h1>
                        
                        <div class="lab-features">
                            <h2>Laboratuvar HakkÄ±nda</h2>
                            <p id="lab-about">Laboratuvar hakkÄ±nda bilgi yÃ¼kleniyor...</p>
                        </div>
                    </div>
                </div>
                
                <!-- Error state -->
                <div id="lab-error" class="lab-error" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h2>Laboratuvar BulunamadÄ±</h2>
                    <p>Belirtilen laboratuvar bulunamadÄ± veya yÃ¼klenemedi.</p>
                    <a href="../../myokatalog/index.html" class="btn back-to-catalog-btn">
                        <i class="fas fa-arrow-left"></i>
                        KataloÄŸa Geri DÃ¶n
                    </a>
                </div>
            </div>

                <!-- Devices section -->
                <div class="devices-section">
                    <h2>Laboratuvar CihazlarÄ±</h2>
                    
                    <!-- Loading state for devices -->
                    <div id="devices-loading" class="devices-loading">
                        <div class="spinner"></div>
                        <p>Cihazlar yÃ¼kleniyor...</p>
                    </div>
                    
                    <!-- Devices grid (will be populated dynamically) -->
                    <div id="devices-grid" class="devices-grid" style="display: none;">
                        <!-- Devices will be loaded here -->
                    </div>
                    
                    <!-- No devices state -->
                    <div id="no-devices" class="no-devices" style="display: none;">
                        <i class="fas fa-microchip"></i>
                        <p>Bu laboratuvarda henÃ¼z cihaz bulunmamaktadÄ±r</p>
                        <small>Dashboard'dan cihaz ekleyebilirsiniz</small>
                    </div>
                </div>
            </div>
        </main>

    <footer>
        <div class="footer-contact">
            <div class="footer-info">
                <a href="https://xrlab.mcbu.edu.tr/" 
                   target="_blank" 
                   aria-label="XRlab sitesini ziyaret et">
                    <img src="../images/xr.png" alt="XRlab" width="100" height="100" />
                </a>
                <p class="footer-title">Copyright Â© 2025. MCBU Extended Reality Lab. All Rights Reserved.</p>
                <p class="footer-title">TasarÄ±m ve Kodlama</p>
            </div>
            <div class="footer-name-container">  
                <p class="footer-name">GÃ¶rkem Taha Ã‡anakcÄ±</p>
                <div class="footer-social">
                    <a href="mailto:gorkemtaha1000@gmail.com" 
                       target="_blank" 
                       aria-label="Gmail adresimi ziyaret et">
                        <img src="../images/gm.png" alt="Gmail" width="28" height="28" />
                    </a>
                    <a href="https://www.linkedin.com/in/gÃ¶rkem-taha-Ã§-31521028a/" 
                       target="_blank" 
                       aria-label="LinkedIn profilimi ziyaret et">
                        <img src="../images/li.png" alt="LinkedIn" width="28" height="28" />
                    </a>
                    <a href="https://github.com/Gorkem-Taha" 
                       target="_blank" 
                       aria-label="GitHub profilimi ziyaret et">
                        <img src="../images/github.png" alt="GitHub" width="28" height="28" />
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Sayfa yÃ¼klendiÄŸinde laboratuvar bilgilerini yÃ¼kle
        document.addEventListener('DOMContentLoaded', function() {
            loadLabDetails();
        });

        // URL'den laboratuvar ID'sini al
        function getLabIdFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('id');
        }

        // Laboratuvar detaylarÄ±nÄ± yÃ¼kle
        async function loadLabDetails() {
            const labId = getLabIdFromUrl();
            
            console.log('ðŸ” Laboratuvar ID:', labId);
            
            if (!labId) {
                showLabError('Laboratuvar ID bulunamadÄ±');
                return;
            }

            try {
                console.log('ðŸ“¡ API Ã§aÄŸrÄ±larÄ± baÅŸlÄ±yor...');
                
                // Laboratuvar iÃ§eriÄŸini yÃ¼kle
                const contentUrl = `../../Dasboard/api_lab_contents.php?lab_id=${labId}`;
                console.log('ðŸ“‹ Ä°Ã§erik API URL:', contentUrl);
                
                const contentResponse = await fetch(contentUrl);
                console.log('ðŸ“‹ Ä°Ã§erik API Response Status:', contentResponse.status);
                
                const contentData = await contentResponse.json();
                console.log('ðŸ“‹ Ä°Ã§erik API Data:', contentData);
                
                // Laboratuvar bilgilerini yÃ¼kle
                const labUrl = `../../Dasboard/api_laboratories.php?action=get_by_id&id=${labId}`;
                console.log('ðŸ—ï¸ Laboratuvar API URL:', labUrl);
                
                const labResponse = await fetch(labUrl);
                console.log('ðŸ—ï¸ Laboratuvar API Response Status:', labResponse.status);
                
                const labData = await labResponse.json();
                console.log('ðŸ—ï¸ Laboratuvar API Data:', labData);
                
                if (contentData.success || labData.success) {
                    console.log('âœ… Veri baÅŸarÄ±yla yÃ¼klendi');
                    console.log('ðŸ“‹ Content Data:', contentData);
                    console.log('ðŸ—ï¸ Lab Data:', labData);
                    displayLabContent(contentData.data, labData.data);
                    // CihazlarÄ± da yÃ¼kle
                    loadLabDevices(labId);
                } else {
                    console.log('âŒ API baÅŸarÄ±sÄ±z:', { contentData, labData });
                    showLabError('Laboratuvar bilgileri yÃ¼klenemedi');
                }
            } catch (error) {
                console.error('ðŸ’¥ Laboratuvar yÃ¼klenirken hata:', error);
                showLabError('Laboratuvar yÃ¼klenirken hata oluÅŸtu: ' + error.message);
            }
        }

        // Laboratuvar iÃ§eriÄŸini gÃ¶rÃ¼ntÃ¼le
        function displayLabContent(contents, labInfo) {
            const loadingDiv = document.getElementById('lab-loading');
            const contentDiv = document.getElementById('lab-content');
            const errorDiv = document.getElementById('lab-error');
            
            // Loading'i gizle
            loadingDiv.style.display = 'none';
            
            if (!contents && !labInfo) {
                errorDiv.style.display = 'block';
                return;
            }
            
            // Ä°Ã§eriÄŸi gÃ¶ster
            contentDiv.style.display = 'block';
            
            // BaÅŸlÄ±k gÃ¼ncelle
            if (contents && contents.lab_title) {
                document.getElementById('lab-title').textContent = contents.lab_title.content_value;
            } else if (labInfo) {
                document.getElementById('lab-title').textContent = labInfo.name;
            }
            
            // HakkÄ±nda metni gÃ¼ncelle (Ã¶nce detay sayfasÄ± metni, yoksa katalog metni)
            console.log('ðŸ“ HakkÄ±nda metni gÃ¼ncelleniyor...');
            console.log('ðŸ“ Contents:', contents);
            console.log('ðŸ“ detail_about_text:', contents?.detail_about_text);
            console.log('ðŸ“ about_text:', contents?.about_text);
            
            if (contents && contents.detail_about_text) {
                console.log('âœ… Detay sayfasÄ± metni bulundu:', contents.detail_about_text.content_value);
                document.getElementById('lab-about').textContent = contents.detail_about_text.content_value;
            } else if (contents && contents.about_text) {
                console.log('âœ… Katalog metni bulundu:', contents.about_text.content_value);
                document.getElementById('lab-about').textContent = contents.about_text.content_value;
            } else {
                console.log('âŒ HiÃ§bir metin bulunamadÄ±, varsayÄ±lan metin gÃ¶steriliyor');
                document.getElementById('lab-about').textContent = 'Bu laboratuvar hakkÄ±nda detaylÄ± bilgi bulunmamaktadÄ±r.';
            }
            
            // Ana resim gÃ¼ncelle
            if (contents && contents.main_image) {
                document.getElementById('lab-main-image').src = `../../${contents.main_image.content_value}`;
                document.getElementById('lab-main-image').alt = document.getElementById('lab-title').textContent;
            } else {
                // VarsayÄ±lan resim gÃ¶ster
                document.getElementById('lab-main-image').src = '../../images/myo.png';
                document.getElementById('lab-main-image').alt = 'Laboratuvar VarsayÄ±lan Resmi';
            }
        }

        // Laboratuvar cihazlarÄ±nÄ± yÃ¼kle
        async function loadLabDevices(labId) {
            try {
                console.log('ðŸ”§ Cihazlar yÃ¼kleniyor, Lab ID:', labId);
                
                const deviceUrl = `../../Dasboard/api_devices.php?action=get_by_lab&lab_id=${labId}`;
                console.log('ðŸ”§ Cihaz API URL:', deviceUrl);
                
                const response = await fetch(deviceUrl);
                console.log('ðŸ”§ Cihaz API Response Status:', response.status);
                
                const data = await response.json();
                console.log('ðŸ”§ Cihaz API Data:', data);
                
                if (data.success) {
                    console.log('âœ… Cihazlar baÅŸarÄ±yla yÃ¼klendi:', data.devices);
                    displayDevices(data.devices);
                } else {
                    console.log('âŒ Cihaz API baÅŸarÄ±sÄ±z:', data);
                    showNoDevices();
                }
            } catch (error) {
                console.error('ðŸ’¥ Cihazlar yÃ¼klenirken hata:', error);
                showNoDevices();
            }
        }

        // CihazlarÄ± gÃ¶rÃ¼ntÃ¼le
        function displayDevices(devices) {
            const loadingDiv = document.getElementById('devices-loading');
            const gridDiv = document.getElementById('devices-grid');
            const noDevicesDiv = document.getElementById('no-devices');
            
            // Loading'i gizle
            loadingDiv.style.display = 'none';
            
            if (!devices || devices.length === 0) {
                showNoDevices();
                return;
            }
            
            // CihazlarÄ± gÃ¶ster
            gridDiv.style.display = 'grid';
            
            let html = '';
            devices.forEach(device => {
                html += `
                    <div class="device-container">
                        <div class="device-photo">
                            ${device.image_url ? 
                                `<img src="../../${device.image_url}" alt="${device.device_name}">` :
                                `<div class="device-no-image">
                                    <i class="fas fa-microchip"></i>
                                </div>`
                            }
                        </div>
                        <div class="device-info">
                            <div class="device-name">
                                <h2>Cihaz AdÄ±/Modeli</h2>
                                <h4>${device.device_name}</h4>
                                ${device.device_model ? `<small>${device.device_model}</small>` : ''}
                            </div>
                            <div class="device-count">
                                <h2>SayÄ±sÄ±</h2>
                                <h4>${device.device_count}</h4>
                            </div>
                        </div>
                        <div class="device-purpose">
                            <h2>KullanÄ±m AmacÄ±</h2>
                            <h4>${device.purpose || 'BelirtilmemiÅŸ'}</h4>
                        </div>
                    </div>
                `;
            });
            
            gridDiv.innerHTML = html;
        }

        // Cihaz yok durumunu gÃ¶ster
        function showNoDevices() {
            document.getElementById('devices-loading').style.display = 'none';
            document.getElementById('devices-grid').style.display = 'none';
            document.getElementById('no-devices').style.display = 'block';
        }

        // Laboratuvar hatasÄ± gÃ¶ster
        function showLabError(message) {
            document.getElementById('lab-loading').style.display = 'none';
            document.getElementById('lab-content').style.display = 'none';
            document.getElementById('lab-error').style.display = 'block';
            
            const errorDiv = document.getElementById('lab-error');
            errorDiv.querySelector('p').textContent = message;
        }
    </script>
</body>

<!-- Mirrored from xrlab.cbu.edu.tr/lab/pages/lab9.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 23 Aug 2025 09:17:17 GMT -->
</html>
